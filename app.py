import streamlit as st
import pandas as pd

# --- Conjunto de Datos de B칰squedas y Temas de Inter칠s ---
# Este es nuestro "historial" de b칰squedas y los temas de inter칠s asociados.
# En un sistema real, esto provendr칤a de una base de datos o un data lake.
data = {
    "busqueda": [
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas de ciencia ficcion",
        "suplementos fitness",
        "pantallas LED decorativas",
        "accesorios para mascotas",
        "aplicaciones de recetas",
        "auriculares inalambricos gym",
        "cargador solar port치til",
        "coches electricos",
        "mochilas de senderismo",
        "juegos de estrategia",
        "ropa termica para correr",
        "luces inteligentes",
        "alimento premium gatos",
        "yoga principiantes",
        "pantalla 4K",
        "cargador solar port치til",
        "coches electricos",
        "bicicletas de monta침a",
        "libros de misterio",
        "entrenamiento en casa",
        "luces inteligentes",
        "accesorios para mascotas",
        "tupper saludables",
        "reloj Garmin",
        "viajes a la playa",
        "motos deportivas",
        "mochilas de senderismo",
        "juegos de estrategia",
        "calcetines deportivos",
        "escritorios ajustables",
        "accesorios para mascotas",
        "yoga principiantes",
        "drone para fotografia",
        "cargador solar port치til",
        "coches electricos",
        "mochilas de senderismo",
        "libros de misterio",
        "ropa de ejercicio",
        "decoracion de interiores",
        "accesorios para mascotas",
        "yoga principiantes",
        "camara deportiva",
        "hoteles baratos",
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas romanticas",
        "calcetines deportivos",
        "macetas decorativas",
        "accesorios para mascotas",
        "aplicaciones de recetas",
        "consolas de nueva generacion",
        "hoteles baratos",
        "coches electricos",
        "mochilas de senderismo",
        "libros de misterio",
        "zapatillas deportivas",
        "escritorios ajustables",
        "accesorios para mascotas",
        "colchoneta yoga",
        "camara deportiva",
        "viajes a la playa",
        "coches electricos",
        "mochilas de senderismo",
        "libros de misterio",
        "bicicleta estatica",
        "macetas decorativas",
        "accesorios para mascotas",
        "recetas veganas",
        "drone para fotografia",
        "power bank para viajes",
        "coches electricos",
        "bicicletas de monta침a",
        "series policiacas",
        "camisetas running",
        "robots de limpieza",
        "alimento premium gatos",
        "documentales sobre salud",
        "mouse gamer",
        "cargador solar port치til",
        "motos deportivas",
        "mochilas de senderismo",
        "juegos de estrategia",
        "ropa termica para correr",
        "sillas ergonomicas",
        "accesorios para mascotas",
        "recetas veganas",
        "mouse gamer",
        "hoteles baratos",
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas de ciencia ficcion",
        "calcetines deportivos",
        "robots de limpieza",
        "correas para perros",
        "yoga principiantes",
        "drone para fotografia",
        "cargador solar port치til",
        "motos deportivas",
        "zapatos de senderismo",
        "peliculas de accion",
        "ropa de ejercicio",
        "luces inteligentes",
        "correas para perros",
        "yoga principiantes",
        "drone para fotografia",
        "power bank para viajes",
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas de accion",
        "ropa de ejercicio",
        "luces inteligentes",
        "alimento premium gatos",
        "recetas veganas",
        "mouse gamer",
        "hoteles baratos",
        "motos deportivas",
        "zapatos de senderismo",
        "libros de misterio",
        "calcetines deportivos",
        "sillas ergonomicas",
        "accesorios para mascotas",
        "tupper saludables",
        "teclado mecanico",
        "viajes a la playa",
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas de ciencia ficcion",
        "bicicleta estatica",
        "macetas decorativas",
        "correas para perros",
        "colchoneta yoga",
        "drone para fotografia",
        "hoteles baratos",
        "coches electricos",
        "bicicletas de monta침a",
        "peliculas de accion",
        "entrenamiento en casa",
        "robots de limpieza",
        "accesorios para mascotas",
        "tupper saludables",
        "pantalla 4K",
        "viajes a la playa",
        "motos deportivas",
        "zapatos de senderismo",
        "series de fantasia",
        "suplementos fitness",
        "herramientas de jardin",
        "accesorios para mascotas"
    ],
    "tema_interes": [
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas",
        "salud y bienestar",
        "tecnologia",
        "viajes",
        "automovilismo",
        "deportes al aire libre",
        "entretenimiento",
        "fitness",
        "hogar y jardin",
        "mascotas"
    ],
    "anuncio_sugerido": [
        "Test drive de Tesla",
        "Bicicletas de monta침a Trek",
        "Cl치sicos del cine rom치ntico",
        "Descuento en ropa Adidas",
        "Macetas de dise침o",
        "Comida Royal Canin gatos",
        "Recetario vegano gratuito",
        "Pantalla LG 4K de 32 pulgadas",
        "Hoteles con descuento en Punta Cana",
        "Test drive de Tesla",
        "Botas Columbia para senderismo",
        "Pel칤culas de acci칩n recomendadas",
        "Descuento en ropa Adidas",
        "Macetas de dise침o",
        "Juguetes y accesorios para gatos",
        "Tuppers herm칠ticos y saludables",
        "Mouse gamer RGB",
        "Paquetes tur칤sticos a Canc칰n",
        "Test drive de Tesla",
        "Mochilas The North Face",
        "Marat칩n de series policiacas",
        "App de entrenamiento personalizado",
        "Roomba con sensor inteligente",
        "Comida Royal Canin gatos",
        "Apps con m치s de 10,000 recetas",
        "Pantalla LG 4K de 32 pulgadas",
        "Paquetes tur칤sticos a Canc칰n",
        "Test drive de Tesla",
        "Botas Columbia para senderismo",
        "Novelas de suspense",
        "App de entrenamiento personalizado",
        "Escritorio regulable el칠ctrico",
        "Juguetes y accesorios para gatos",
        "Recetario vegano gratuito",
        "GoPro Hero en oferta",
        "Power banks con carga r치pida",
        "Test drive de Tesla",
        "Bicicletas de monta침a Trek",
        "Cl치sicos del cine rom치ntico",
        "Pack de calcetines Nike",
        "Luces inteligentes Alexa",
        "Comida Royal Canin gatos",
        "Recetario vegano gratuito",
        "Mouse gamer RGB",
        "Paquetes tur칤sticos a Canc칰n",
        "Test drive de Tesla",
        "Botas Columbia para senderismo",
        "Cl치sicos del cine rom치ntico",
        "Descuento en ropa Adidas",
        "Luces inteligentes Alexa",
        "Juguetes y accesorios para gatos",
        "App de meditaci칩n premium",
        "Drones DJI con c치mara 4K",
        "Cargador solar para camping",
        "Test drive de Tesla",
        "Mochilas The North Face",
        "Sagas literarias 칠picas",
        "Descuento en bicicletas est치ticas",
        "Sillas ergon칩micas para home office",
        "Correas resistentes para perros grandes",
        "Tuppers herm칠ticos y saludables",
        "Pantalla LG 4K de 32 pulgadas",
        "Paquetes tur칤sticos a Canc칰n",
        "Motos Ducati a tu medida",
        "Bicicletas de monta침a Trek",
        "Pel칤culas de acci칩n recomendadas",
        "Oferta de zapatillas Nike",
        "Macetas de dise침o",
        "Juguetes y accesorios para gatos",
        "Set de yoga con colchoneta ecol칩gica",
        "Nuevo Apple Watch",
        "Power banks con carga r치pida",
        "Motos Ducati a tu medida",
        "Bicicletas de monta침a Trek",
        "Sagas literarias 칠picas",
        "Descuento en bicicletas est치ticas",
        "Roomba con sensor inteligente",
        "Comida Royal Canin gatos",
        "Set de yoga con colchoneta ecol칩gica",
        "Nuevo Apple Watch",
        "Power banks con carga r치pida",
        "Test drive de Tesla",
        "Bicicletas de monta침a Trek",
        "Marat칩n de series policiacas",
        "Pesas rusas con env칤o gratis",
        "Escritorio regulable el칠ctrico",
        "Comida Royal Canin gatos",
        "App de meditaci칩n premium",
        "Aud칤fonos Bluetooth JBL",
        "Paquetes tur칤sticos a Canc칰n",
        "Motos Ducati a tu medida",
        "Bicicletas de monta침a Trek",
        "Estrenos en Netflix",
        "Promo en prote칤nas",
        "Herramientas de jardiner칤a profesionales",
        "Juguetes y accesorios para gatos",
        "Top 10 libros de autoayuda",
        "GoPro Hero en oferta",
        "Power banks con carga r치pida",
        "Motos Ducati a tu medida",
        "Bicicletas de monta침a Trek",
        "Cl치sicos del cine rom치ntico",
        "Promo en prote칤nas",
        "Macetas de dise침o",
        "Correas resistentes para perros grandes",
        "Mejores documentales de salud 2024",
        "GoPro Hero en oferta",
        "Power banks con carga r치pida",
        "Test drive de Tesla",
        "Mochilas The North Face",
        "Marat칩n de series policiacas",
        "Ropa deportiva Under Armour",
        "Luces inteligentes Alexa",
        "Comida Royal Canin gatos",
        "Clases de yoga en l칤nea",
        "Ofertas en relojes Garmin",
        "Hoteles con descuento en Punta Cana",
        "Motos Ducati a tu medida",
        "Botas Columbia para senderismo",
        "Sagas literarias 칠picas",
        "Mancuernas ajustables PowerBlock",
        "Macetas de dise침o",
        "Correas resistentes para perros grandes",
        "Top 10 libros de autoayuda",
        "Mouse gamer RGB",
        "Hoteles con descuento en Punta Cana",
        "Test drive de Tesla",
        "Bicicletas de monta침a Trek",
        "Cl치sicos del cine rom치ntico",
        "Promo en prote칤nas",
        "Plantas ex칩ticas para tu hogar",
        "Juguetes y accesorios para gatos",
        "Recetario vegano gratuito",
        "Pantalla LG 4K de 32 pulgadas",
        "Cargador solar para camping",
        "Test drive de Tesla",
        "Botas Columbia para senderismo",
        "Pel칤culas de acci칩n recomendadas",
        "Mancuernas ajustables PowerBlock",
        "Sillas ergon칩micas para home office",
        "Comida Royal Canin gatos",
        "Clases de yoga en l칤nea",
        "Pantalla LG 4K de 32 pulgadas",
        "Cargador solar para camping",
        "Motos Ducati a tu medida",
        "Mochilas The North Face",
        "Juegos para PlayStation 5",
        "2x1 en batidos de prote칤na vegana",
        "Decoraci칩n estilo escandinavo",
        "Comida Royal Canin gatos"
    ]
}

df_busquedas = pd.DataFrame(data)

# --- Funci칩n para Sugerir Anuncios ---
def sugerir_anuncios(busqueda_usuario):
    # Convertir la b칰squeda del usuario a min칰sculas para una comparaci칩n insensible a may칰sculas
    busqueda_usuario_lower = busqueda_usuario.lower()

    # Buscar temas de inter칠s relacionados con la b칰squeda del usuario
    temas_relacionados = df_busquedas[df_busquedas["busqueda"].str.contains(busqueda_usuario_lower, case=False)]["tema_interes"].unique()

    sugerencias = []
    if len(temas_relacionados) > 0:
        # Si encontramos temas relacionados, sugerimos anuncios basados en esos temas
        for tema in temas_relacionados:
            anuncios_posibles = df_busquedas[df_busquedas["tema_interes"] == tema]["anuncio_sugerido"].tolist()
            sugerencias.extend(anuncios_posibles)
    else:
        # Si no hay coincidencias directas, se podr칤a implementar una l칩gica m치s compleja
        # (por ejemplo, buscar palabras clave, usar modelos de embeddings, etc.)
        # Para este ejemplo simple, si no hay coincidencia directa, sugerimos anuncios generales
        sugerencias = ["Anuncios generales: 춰Descubre ofertas en productos variados!", "Prueba nuestros servicios premium", "Explora nuevas categor칤as"]

    # Eliminar duplicados y devolver una muestra limitada
    return list(set(sugerencias))[:5] # Limitar a 5 sugerencias para no abrumar

# --- Interfaz de Usuario con Streamlit ---
st.set_page_config(page_title="Emulaci칩n de Anuncios Sugeridos", layout="centered")

st.title("游댍 Emulaci칩n de Sugerencia de Anuncios Basada en B칰squedas")
st.markdown("""
Este ejemplo simula c칩mo las b칰squedas de un usuario en una plataforma
podr칤an influir en los anuncios que se le muestran.
Introduce algunas palabras clave en el buscador y mira qu칠 anuncios se sugieren.
""")

st.subheader("Simulador de B칰squeda")
user_input = st.text_input("쯈u칠 est치s buscando hoy?", placeholder="Ej: zapatillas deportivas, peliculas de ciencia ficcion, viajes")

if user_input:
    st.subheader("Anuncios Sugeridos para ti:")
    sugerencias_anuncios = sugerir_anuncios(user_input)

    if sugerencias_anuncios:
        for anuncio in sugerencias_anuncios:
            st.info(f"游녤 {anuncio}")
    else:
        st.write("No hay sugerencias de anuncios en este momento para tu b칰squeda espec칤fica. 춰Intenta con otras palabras clave!")

st.markdown("---")
st.subheader("C칩mo funciona (Detr치s de Escena):")
st.markdown("""
1.  **Conjunto de Datos:** Tenemos un conjunto de datos simple que asocia palabras clave de b칰squeda con "temas de inter칠s" (por ejemplo, 'fitness', 'entretenimiento', 'viajes').
2.  **Mapeo:** Cuando ingresas una b칰squeda, el sistema intenta mapear tus palabras clave a uno o m치s de estos temas de inter칠s.
3.  **Sugerencia:** Una vez que se identifica un tema de inter칠s, se muestran anuncios que est치n pre-asociados con ese tema en nuestro conjunto de datos.
""")

st.subheader("Datos de Ejemplo Utilizados:")
st.dataframe(df_busquedas)

st.caption("Nota: Este es un ejemplo simplificado. Un sistema de sugerencia de anuncios real ser칤a mucho m치s complejo, utilizando algoritmos de machine learning, an치lisis de comportamiento del usuario, historial de clics, datos demogr치ficos, etc.")
