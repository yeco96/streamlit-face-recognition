import streamlit as st
import pandas as pd

# --- Conjunto de Datos de B칰squedas y Temas de Inter칠s ---
# Este es nuestro "historial" de b칰squedas y los temas de inter칠s asociados.
# En un sistema real, esto provendr칤a de una base de datos o un data lake.
data = {
    "busqueda": [
        "accesorios para mascotas",
        "bicicletas de monta침a",
        "bicicleta estatica",
        "coches electricos",
        "consolas de nueva generacion",
        "documentales sobre salud",
        "juegos de estrategia",
        "decoracion de interiores",
        "hoteles baratos",
        "accesorios para mascotas",
        "mochilas de senderismo",
        "batidos de proteina",
        "motos deportivas",
        "drone para fotografia",
        "libros de autoayuda",
        "peliculas de accion",
        "herramientas de jardin",
        "power bank para viajes",
        "alimento premium gatos",
        "zapatos de senderismo",
        "suplementos fitness",
        "coches electricos",
        "mouse gamer",
        "recetas veganas",
        "libros de misterio",
        "sillas ergonomicas",
        "hoteles baratos",
        "correas para perros",
        "bicicletas de monta침a",
        "zapatillas deportivas",
        "motos deportivas",
        "smartwatch deportivo",
        "yoga principiantes",
        "peliculas de ciencia ficcion",
        "plantas de interior",
        "cargador solar port치til",
        "accesorios para mascotas",
        "zapatos de senderismo",
        "ropa de ejercicio",
        "coches electricos",
        "teclado mecanico",
        "aplicaciones de recetas",
        "series de fantasia",
        "escritorios ajustables",
        "viajes a la playa",
        "alimento premium gatos",
        "mochilas de senderismo",
        "calcetines deportivos",
        "motos deportivas",
        "auriculares gamer",
        "meditacion guiada",
        "videojuegos de rol",
        "macetas decorativas",
        "cargador solar port치til",
        "correas para perros",
        "bicicletas de monta침a",
        "entrenamiento en casa",
        "coches electricos",
        "pantalla 4K",
        "recetas saludables",
        "peliculas romanticas",
        "pantallas LED decorativas",
        "viajes a la playa",
        "alimento premium gatos",
        "zapatos de senderismo",
        "camisetas running",
        "motos deportivas",
        "reloj Garmin",
        "colchoneta yoga",
        "series policiacas",
        "luces inteligentes",
        "hoteles baratos",
        "accesorios para mascotas",
        "mochilas de senderismo",
        "mancuernas ajustables",
        "coches electricos",
        "auriculares inalambricos gym",
        "tupper saludables",
        "peliculas de ciencia ficcion",
        "robots de limpieza",
        "cargador solar port치til",
        "correas para perros",
        "zapatos de senderismo",
        "ropa termica para correr",
        "motos deportivas",
        "camara deportiva",
        "libros de autoayuda",
        "juegos de estrategia",
        "herramientas de jardin",
        "power bank para viajes",
        "accesorios para mascotas",
        "bicicletas de monta침a",
        "pesas rusas",
        "coches electricos",
        "smartwatch deportivo",
        "documentales sobre salud",
        "series de fantasia",
        "decoracion de interiores",
        "hoteles baratos",
        "alimento premium gatos",
        "mochilas de senderismo",
        "zapatillas deportivas",
        "motos deportivas",
        "consolas de nueva generacion",
        "recetas saludables",
        "peliculas de accion",
        "plantas de interior",
        "viajes a la playa",
        "correas para perros",
        "zapatos de senderismo",
        "ropa de ejercicio",
        "coches electricos",
        "mouse gamer",
        "yoga principiantes",
        "libros de misterio",
        "sillas ergonomicas",
        "hoteles baratos",
        "accesorios para mascotas",
        "bicicletas de monta침a",
        "suplementos fitness",
        "motos deportivas",
        "teclado mecanico",
        "aplicaciones de recetas",
        "videojuegos de rol",
        "escritorios ajustables",
        "cargador solar port치til",
        "alimento premium gatos",
        "mochilas de senderismo",
        "bicicleta estatica",
        "coches electricos",
        "auriculares gamer",
        "meditacion guiada",
        "peliculas romanticas",
        "macetas decorativas",
        "power bank para viajes",
        "correas para perros",
        "zapatos de senderismo",
        "camisetas running",
        "motos deportivas",
        "reloj Garmin",
        "colchoneta yoga",
        "series policiacas",
        "pantallas LED decorativas",
        "viajes a la playa",
        "accesorios para mascotas",
        "bicicletas de monta침a",
        "entrenamiento en casa",
        "motos deportivas",
        "pantalla 4K",
        "recetas veganas",
        "peliculas de ciencia ficcion",
        "luces inteligentes",
        "hoteles baratos",
        "alimento premium gatos",
        "zapatos de senderismo",
        "batidos de proteina",
        "coches electricos",
        "auriculares inalambricos gym",
        "tupper saludables",
        "juegos de estrategia",
        "robots de limpieza"
    ],
    "tema_interes": [
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin",
        "viajes",
        "mascotas",
        "deportes al aire libre",
        "fitness",
        "automovilismo",
        "tecnologia",
        "salud y bienestar",
        "entretenimiento",
        "hogar y jardin"
    ],
    "anuncio_sugerido": [
        "Correas resistentes para perros grandes",
        "Bicicletas de monta침a Trek",
        "Descuento en bicicletas est치ticas",
        "Test drive de Tesla",
        "Ofertas en consolas Xbox",
        "Recetario vegano gratuito",
        "Juegos para PlayStation 5",
        "Tiras LED con control remoto",
        "Hoteles con descuento en Punta Cana",
        "Juguetes y accesorios para gatos",
        "Botas Columbia para senderismo",
        "2x1 en batidos de prote칤na vegana",
        "Test drive de Tesla",
        "Drones DJI con c치mara 4K",
        "Top 10 libros de autoayuda",
        "Cl치sicos del cine rom치ntico",
        "Plantas ex칩ticas para tu hogar",
        "Power banks con carga r치pida",
        "Comida Royal Canin gatos",
        "Mochilas The North Face",
        "Promo en prote칤nas",
        "Motos Ducati a tu medida",
        "Auriculares Razer Kraken",
        "Apps con m치s de 10,000 recetas",
        "Sagas literarias 칠picas",
        "Sillas ergon칩micas para home office",
        "Paquetes tur칤sticos a Canc칰n",
        "Juguetes y accesorios para gatos",
        "Botas Columbia para senderismo",
        "Oferta de zapatillas Nike",
        "Motos Ducati a tu medida",
        "Ofertas en relojes Garmin",
        "App de meditaci칩n premium",
        "Marat칩n de series policiacas",
        "Decoraci칩n estilo escandinavo",
        "Power banks con carga r치pida",
        "Correas resistentes para perros grandes",
        "Botas Columbia para senderismo",
        "Descuento en ropa Adidas",
        "Test drive de Tesla",
        "Teclado mec치nico Logitech",
        "Curso de cocina saludable online",
        "Novelas de suspense",
        "Escritorio regulable el칠ctrico",
        "Cargador solar para camping",
        "Comida Royal Canin gatos",
        "Mochilas The North Face",
        "Pack de calcetines Nike",
        "Test drive de Tesla",
        "Auriculares Razer Kraken",
        "Set de yoga con colchoneta ecol칩gica",
        "Juegos para PlayStation 5",
        "Herramientas de jardiner칤a profesionales",
        "Hoteles con descuento en Punta Cana",
        "Juguetes y accesorios para gatos",
        "Bicicletas de monta침a Trek",
        "App de entrenamiento personalizado",
        "Motos Ducati a tu medida",
        "Pantalla LG 4K de 32 pulgadas",
        "Curso de cocina saludable online",
        "Pel칤culas de acci칩n recomendadas",
        "Tiras LED con control remoto",
        "Paquetes tur칤sticos a Canc칰n",
        "Juguetes y accesorios para gatos",
        "Mochilas The North Face",
        "Ropa deportiva Under Armour",
        "Motos Ducati a tu medida",
        "Nuevo Apple Watch",
        "Clases de yoga en l칤nea",
        "Estrenos en Netflix",
        "Luces inteligentes Alexa",
        "Paquetes tur칤sticos a Canc칰n",
        "Correas resistentes para perros grandes",
        "Botas Columbia para senderismo",
        "Mancuernas ajustables PowerBlock",
        "Test drive de Tesla",
        "Aud칤fonos Bluetooth JBL",
        "Apps con m치s de 10,000 recetas",
        "Cl치sicos del cine rom치ntico",
        "Roomba con sensor inteligente",
        "Cargador solar para camping",
        "Juguetes y accesorios para gatos",
        "Mochilas The North Face",
        "Ropa t칠rmica Puma",
        "Motos Ducati a tu medida",
        "GoPro Hero en oferta",
        "Mejores documentales de salud 2024",
        "Steam: descuentos en estrategia",
        "Decoraci칩n estilo escandinavo",
        "Power banks con carga r치pida",
        "Comida Royal Canin gatos",
        "Bicicletas de monta침a Trek",
        "Pesas rusas con env칤o gratis",
        "Test drive de Tesla",
        "Nuevo Apple Watch",
        "Mejores documentales de salud 2024",
        "Sagas literarias 칠picas",
        "Plantas ex칩ticas para tu hogar",
        "Hoteles con descuento en Punta Cana",
        "Juguetes y accesorios para gatos",
        "Botas Columbia para senderismo",
        "Oferta de zapatillas Nike",
        "Motos Ducati a tu medida",
        "Ofertas en consolas Xbox",
        "Curso de cocina saludable online",
        "Cl치sicos del cine rom치ntico",
        "Herramientas de jardiner칤a profesionales",
        "Cargador solar para camping",
        "Correas resistentes para perros grandes",
        "Mochilas The North Face",
        "Descuento en ropa Adidas",
        "Test drive de Tesla",
        "Mouse gamer RGB",
        "App de meditaci칩n premium",
        "Novelas de suspense",
        "Sillas ergon칩micas para home office",
        "Paquetes tur칤sticos a Canc칰n",
        "Juguetes y accesorios para gatos",
        "Bicicletas de monta침a Trek",
        "Promo en prote칤nas",
        "Motos Ducati a tu medida",
        "Teclado mec치nico Logitech",
        "Apps con m치s de 10,000 recetas",
        "Juegos para PlayStation 5",
        "Escritorio regulable el칠ctrico",
        "Hoteles con descuento en Punta Cana",
        "Juguetes y accesorios para gatos",
        "Botas Columbia para senderismo",
        "Descuento en bicicletas est치ticas",
        "Test drive de Tesla",
        "Auriculares Razer Kraken",
        "Set de yoga con colchoneta ecol칩gica",
        "Pel칤culas de acci칩n recomendadas",
        "Macetas de dise침o",
        "Power banks con carga r치pida",
        "Correas resistentes para perros grandes",
        "Mochilas The North Face",
        "Ropa deportiva Under Armour",
        "Motos Ducati a tu medida",
        "GoPro Hero en oferta",
        "Clases de yoga en l칤nea",
        "Marat칩n de series policiacas",
        "Tiras LED con control remoto",
        "Paquetes tur칤sticos a Canc칰n",
        "Correas resistentes para perros grandes",
        "Botas Columbia para senderismo",
        "App de entrenamiento personalizado",
        "Motos Ducati a tu medida",
        "Pantalla LG 4K de 32 pulgadas",
        "Recetario vegano gratuito",
        "Estrenos en Netflix",
        "Luces inteligentes Alexa"
    ]
}

df_busquedas = pd.DataFrame(data)

# --- Funci칩n para Sugerir Anuncios ---
def sugerir_anuncios(busqueda_usuario):
    # Convertir la b칰squeda del usuario a min칰sculas para una comparaci칩n insensible a may칰sculas
    busqueda_usuario_lower = busqueda_usuario.lower()

    # Buscar temas de inter칠s relacionados con la b칰squeda del usuario
    temas_relacionados = df_busquedas[df_busquedas["busqueda"].str.contains(busqueda_usuario_lower, case=False)]["tema_interes"].unique()

    sugerencias = []
    if len(temas_relacionados) > 0:
        # Si encontramos temas relacionados, sugerimos anuncios basados en esos temas
        for tema in temas_relacionados:
            anuncios_posibles = df_busquedas[df_busquedas["tema_interes"] == tema]["anuncio_sugerido"].tolist()
            sugerencias.extend(anuncios_posibles)
    else:
        # Si no hay coincidencias directas, se podr칤a implementar una l칩gica m치s compleja
        # (por ejemplo, buscar palabras clave, usar modelos de embeddings, etc.)
        # Para este ejemplo simple, si no hay coincidencia directa, sugerimos anuncios generales
        sugerencias = ["Anuncios generales: 춰Descubre ofertas en productos variados!", "Prueba nuestros servicios premium", "Explora nuevas categor칤as"]

    # Eliminar duplicados y devolver una muestra limitada
    return list(set(sugerencias))[:5] # Limitar a 5 sugerencias para no abrumar

# --- Interfaz de Usuario con Streamlit ---
st.set_page_config(page_title="Emulaci칩n de Anuncios Sugeridos", layout="centered")

st.title("游댍 Emulaci칩n de Sugerencia de Anuncios Basada en B칰squedas")
st.markdown("""
Este ejemplo simula c칩mo las b칰squedas de un usuario en una plataforma
podr칤an influir en los anuncios que se le muestran.
Introduce algunas palabras clave en el buscador y mira qu칠 anuncios se sugieren.
""")

st.subheader("Simulador de B칰squeda")
user_input = st.text_input("쯈u칠 est치s buscando hoy?", placeholder="Ej: zapatillas deportivas, peliculas de ciencia ficcion, viajes")

if user_input:
    st.subheader("Anuncios Sugeridos para ti:")
    sugerencias_anuncios = sugerir_anuncios(user_input)

    if sugerencias_anuncios:
        for anuncio in sugerencias_anuncios:
            st.info(f"游녤 {anuncio}")
    else:
        st.write("No hay sugerencias de anuncios en este momento para tu b칰squeda espec칤fica. 춰Intenta con otras palabras clave!")

st.markdown("---")
st.subheader("C칩mo funciona (Detr치s de Escena):")
st.markdown("""
1.  **Conjunto de Datos:** Tenemos un conjunto de datos simple que asocia palabras clave de b칰squeda con "temas de inter칠s" (por ejemplo, 'fitness', 'entretenimiento', 'viajes').
2.  **Mapeo:** Cuando ingresas una b칰squeda, el sistema intenta mapear tus palabras clave a uno o m치s de estos temas de inter칠s.
3.  **Sugerencia:** Una vez que se identifica un tema de inter칠s, se muestran anuncios que est치n pre-asociados con ese tema en nuestro conjunto de datos.
""")

st.subheader("Datos de Ejemplo Utilizados:")
st.dataframe(df_busquedas)

st.caption("Nota: Este es un ejemplo simplificado. Un sistema de sugerencia de anuncios real ser칤a mucho m치s complejo, utilizando algoritmos de machine learning, an치lisis de comportamiento del usuario, historial de clics, datos demogr치ficos, etc.")
